(this.webpackJsonpjeopardy=this.webpackJsonpjeopardy||[]).push([[0],{227:function(e,t,a){e.exports=a(455)},232:function(e,t,a){},261:function(e,t){},455:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),c=a.n(o),l=a(6),i=a.n(l),s=(a(232),a(223)),m=a(14),u=a(10),d=a(52),p=a(485),y=a(486);function f(e,t){return{key:t,id:e.id,name:e.name,numPlayers:e.players.length,topic:e.topic,status:e.state}}function g(e){return e.map((function(e,t){return f(e,t)}))}!function(e){e[e.LOBBY=0]="LOBBY",e[e.GAME=1]="GAME"}(n||(n={})),function(e){e[e.READY=0]="READY",e[e.WAITING=1]="WAITING"}(r||(r={}));var b=a(190),E=a.n(b),h=c.a.createContext();function v(){return Object(o.useContext)(h)}function w(e){var t=e.children,a=Object(o.useState)(),n=Object(u.a)(a,2),r=n[0],l=n[1],i=Object(o.useState)(),s=Object(u.a)(i,2),m=s[0],d=s[1];function p(e){console.log("Converted frontend room models: ",g(e)),d(g(e))}return(Object(o.useEffect)((function(){console.log("Called useEffect");var e=E()("http://".concat(window.location.hostname,":3001"));l(e),console.log("Client socket: ",e),e.on("roomListUpdated",p)}),[]),c.a.createElement(h.Provider,{value:{socket:r,rooms:m}},t))}var j={labelCol:{span:8},wrapperCol:{span:16}},O={wrapperCol:{offset:8,span:16}},k={width:"80VW",height:"80VH",display:"grid",gridTemplateAreas:'\n      "header header header header"\n      "name   name   name   name"\n      "name   name   name   name"\n      "lobby  lobby  lobby  lobby"\n  ',margin:"auto"},C={gridArea:"header",justifySelf:"center",alignSelf:"center"},A={gridArea:"name",justifySelf:"center"};function R(){var e=v().socket,t=Object(o.useState)(),a=Object(u.a)(t,2),n=a[0],r=a[1];return n?c.a.createElement(m.a,{to:"/lobby"}):c.a.createElement("div",{style:k},c.a.createElement("h1",{style:C},"Welcome to Multi-Player Jeopardy"),c.a.createElement("div",{style:A},c.a.createElement(p.a,Object.assign({},j,{name:"basic",initialValues:{},onFinish:function(t){console.log("Success:",t);var a={name:t.username};e.emit("userCreated",a),r(!0)},onFinishFailed:function(e){console.log("Failed:",e)}}),c.a.createElement(p.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},c.a.createElement(y.a,null)),c.a.createElement("br",null)," ",c.a.createElement("br",null)," ",c.a.createElement("br",null),c.a.createElement(p.a.Item,O,c.a.createElement(d.a,{type:"primary",htmlType:"submit"},"Enter Lobby")))))}var S=a(45),I=a(484),L={width:"80VW",height:"80VH",display:"grid",gridTemplateAreas:'\n      "header header header header"\n      "roomList   roomList   roomList   roomList"\n      "roomList   roomList   roomList   roomList"\n      "createRoom  createRoom  createRoom  createRoom"\n  ',margin:"auto"},x={gridArea:"header",justifySelf:"center",alignSelf:"center"},P={gridArea:"roomList",justifySelf:"center"},T={gridArea:"createRoom",justifySelf:"center"};function G(){var e=v(),t=e.socket,a=e.rooms,r=Object(o.useState)(),l=Object(u.a)(r,2),i=l[0],s=l[1],p=Object(o.useState)(),y=Object(u.a)(p,2),f=y[0],g=y[1],b=Object(o.useState)(),E=Object(u.a)(b,2),h=E[0],w=E[1];if(i)return c.a.createElement(m.a,{to:"/create-room"});function j(){console.log("Spectating games not implemented yet...")}function O(e,a){console.log("Joining waiting room..."),console.log("Game: ",e),w(e);var n={gameId:e.id};t.emit("userJoinedGame",n,(function(e){e?g(!0):alert("Joining game failed. Please try again.")}))}var k=[{title:"Name",dataIndex:"name",key:"name"},{title:"Players",dataIndex:"numPlayers",key:"numPlayers"},{title:"Topic",dataIndex:"topic",key:"topic"},{title:"Status",dataIndex:"status",key:"status",render:function(e,t,a){switch(t.status){case n.GAME:return"In Game";case n.LOBBY:return"In Lobby"}}},{title:"Action",render:function(e,t,a){return t.status===n.GAME?c.a.createElement(d.a,{onClick:j},"Spectate"):t.status===n.LOBBY?c.a.createElement(d.a,{type:"primary",onClick:O.bind(O,t)},"Join"):void 0}}];return f&&void 0!==h?c.a.createElement(m.a,{to:{pathname:"/waiting-room",state:Object(S.a)({},h)}}):c.a.createElement("div",{style:L},c.a.createElement("h1",{style:x},"Welcome to the Lobby"),c.a.createElement("div",{style:P},c.a.createElement(I.a,{columns:k,dataSource:a})),c.a.createElement("div",{style:T},c.a.createElement(d.a,{type:"danger",onClick:function(){console.log("Clicked create room"),s(!0)}},"Create Room")))}var N=a(69),q=a.n(N),V=a(105),B=a(83),W=a(475),Y=a(212),D=a(213),U=a(214),J=a.n(U),F=new(function(){function e(){Object(Y.a)(this,e),this.httpClient=J.a.create({baseURL:"http://localhost:3001",responseType:"json",headers:{"Content-Type":"application/json"}})}return Object(D.a)(e,[{key:"getTopicsList",value:function(){var e=Object(V.a)(q.a.mark((function e(){var t,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.httpClient.get("/topics");case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0&&e.t0.response&&e.t0,e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}()),H=B.a.Option,M={labelCol:{span:8},wrapperCol:{span:16}},Q={wrapperCol:{offset:8,span:16}},z={width:"80VW",height:"80VH",display:"grid",gridTemplateAreas:'\n      "header header header header"\n      "createRoom   createRoom   createRoom   createRoom"\n      "createRoom   createRoom   createRoom   createRoom"\n      "create  create  create  create"\n  ',margin:"auto"},$={gridArea:"header",justifySelf:"center",alignSelf:"center"},K={gridArea:"createRoom",justifySelf:"center"};function X(){var e=v().socket,t=Object(o.useState)(),a=Object(u.a)(t,2),n=a[0],r=a[1],l=Object(o.useState)(),i=Object(u.a)(l,2),s=i[0],g=i[1],b=Object(o.useState)(),E=Object(u.a)(b,2),h=E[0],w=E[1],j=Object(o.useState)(),O=Object(u.a)(j,2),k=O[0],C=O[1];function A(){return(A=Object(V.a)(q.a.mark((function t(){var a;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Getting list of topics..."),t.next=3,F.getTopicsList();case 3:a=t.sent,console.log("topics: ",a),r(a),e.on("createdRoomResponse",R);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(o.useEffect)((function(){!function(){A.apply(this,arguments)}()}),[]);function R(t){g(f(t,t.id));var a={gameId:t.id};e.emit("userJoinedGame",a,(function(e){e?C(!0):alert("Joining game failed. Please try again.")}))}return k&&void 0!==s?c.a.createElement(m.a,{to:{pathname:"/waiting-room",state:Object(S.a)({},s)}}):h?c.a.createElement(m.a,{to:"/lobby"}):c.a.createElement("div",{style:z},c.a.createElement("h1",{style:$},"Create Your Room"),c.a.createElement("div",{style:K},c.a.createElement(p.a,Object.assign({},M,{name:"basic",initialValues:{},onFinish:function(t){console.log("Success:",t);var a={roomName:t.roomName,fileId:t.topic};e.emit("roomCreated",a)},onFinishFailed:function(e){console.log("Failed:",e)}}),c.a.createElement(p.a.Item,{label:"Room Name",name:"roomName",rules:[{required:!0,message:"Please enter room name!"}]},c.a.createElement(y.a,null)),c.a.createElement(p.a.Item,{label:"Topic",name:"topic",rules:[{required:!0,message:"Please select from the available topics!"}]},c.a.createElement(B.a,{placeholder:"Choose topic",onChange:function(){},allowClear:!0},n?n.map((function(e){return c.a.createElement(H,{value:e.fileId,key:e.fileId},e.topic)})):c.a.createElement(H,{value:"empty"},"Loading..."))),c.a.createElement("br",null)," ",c.a.createElement("br",null)," ",c.a.createElement("br",null),c.a.createElement(p.a.Item,Q,c.a.createElement(d.a,{type:"default",onClick:function(){console.log("Clicked go back to lobby"),w(!0)}},"Back"),c.a.createElement(W.a,{type:"vertical"}),c.a.createElement(d.a,{type:"primary",htmlType:"submit"},"Create")))))}var Z=a(490),_=a(491),ee={width:"80VW",height:"80VH",display:"grid",gridTemplateAreas:'\n      "header header header header"\n      "waitingRoom   waitingRoom   waitingRoom   waitingRoom"\n      "waitingRoom   waitingRoom   waitingRoom   waitingRoom"\n      "create  create  create  create"\n  ',margin:"auto"},te={gridArea:"header",justifySelf:"center",alignSelf:"center"},ae={gridArea:"waitingRoom",justifySelf:"center"};function ne(e){var t=v().socket,a=Object(o.useState)(),n=Object(u.a)(a,2),l=n[0],i=n[1],s=Object(o.useState)(),p=Object(u.a)(s,2),y=p[0],f=p[1],g=Object(o.useState)(),b=Object(u.a)(g,2),E=b[0],h=b[1],w=Object(o.useState)(),j=Object(u.a)(w,2),O=j[0],k=j[1],C=Object(o.useState)(),A=Object(u.a)(C,2),R=A[0],I=A[1];function L(e){console.log("Users: ",e),h(e)}function x(){t.emit("currentRoomRequested",(function(e){f(e),I(!0)}))}return(Object(o.useEffect)((function(){!function(){var a=e.location.state;console.log("Room: ",a),i(a);a.id;t.on("userListUpdated",L),t.on("startGame",x)}()}),[]),O?c.a.createElement(m.a,{to:"/lobby"}):R&&void 0!==y?c.a.createElement(m.a,{to:{pathname:"/game-board",state:Object(S.a)({},y)}}):c.a.createElement("div",{style:ee},c.a.createElement("h1",{style:te}," ",l?l.name:"Room"," "),c.a.createElement("div",{style:ae},E?E.map((function(e){return c.a.createElement(re,{name:"".concat(e.name),ready:e.status===r.READY})})):"No players currently in room...",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(d.a,{type:"default",onClick:function(){t.emit("playerLeftRoom",(function(e){!0===e?k(!0):alert("Leaving failed. Please try again.")}))}},"LEAVE"),c.a.createElement(W.a,{type:"vertical"}),c.a.createElement(d.a,{type:"primary",onClick:function(){t.emit("playerReadiedUp")}},"READY"))))}function re(e){var t=e.name,a=e.ready;return c.a.createElement("div",null,c.a.createElement("span",{style:{fontSize:"24px"}}," ",t," "),a?c.a.createElement(Z.a,{style:{fontSize:"24px",color:"green"}}):c.a.createElement(_.a,{style:{fontSize:"24px",color:"blue"}}))}var oe=a(488);function ce(e){var t={};return e.forEach((function(e){t[e.value]?t[e.value].push(e):t[e.value]=[e]})),t}var le=a(480),ie=a(483),se=a(489),me=a(478),ue=a(481),de=a(482),pe=a(479),ye=a(476),fe={height:"inherit",width:"inherit",border:"1px solid black",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"};function ge(e){var t=e.category,a=e.value;return c.a.createElement("div",{style:fe},c.a.createElement("h1",null,t),c.a.createElement("h1",null,"$",a),c.a.createElement("h1",null,"Question will be shown in 3 seconds..."))}var be=a(215),Ee=new(a.n(be).a),he={display:"block",height:"inherit",width:"inherit"},ve={height:"inherit",width:"inherit",border:"1px solid black",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},we={display:"flex",flexDirection:"column"},je={display:"flex",flexDirection:"column",justifyContent:"center"};function Oe(e){var t=v().socket,a=e.question,n=e.answers,r=[],l=Object(o.useState)([]),i=Object(u.a)(l,2),s=i[0],m=i[1],d=c.a.createRef();function p(e){if(console.log("".concat(e.playerName," answered correctly with ").concat(e.correctAnswer)),e.playerId===t.id)m(s.concat([{message:"You answered correctly",color:"green"}]));else{var a={message:"".concat(e.playerName," answered correctly with ").concat(e.correctAnswer),color:"green"};m(s.concat([a]))}console.log("Emitting game event: ",e.game),Ee.emitEvent("playerAnsweredCorrectly",[e.game]),g(e.correctAnswer,!0)}function y(e){console.log("".concat(e.playerName," answered incorrectly")),g(e.incorrectAnswer,!1),e.playerId===t.id?(r=r.concat([{message:"You answered incorrectly",color:"red"}]),m(r)):(r=r.concat([{message:"".concat(e.playerName," answered incorrectly"),color:"red"}]),m(r)),console.log("Emitting game event: ",e.game),Ee.emitEvent("playerAnsweredIncorrectly",[e.game])}function f(e){console.log("All players answered incorrectly. The correct answer is ".concat(e.correctAnswer)),g(e.correctAnswer,!0),m(r.concat([{message:"All players answered incorrectly. The correct answer is ".concat(e.correctAnswer),color:"red"}])),console.log("Emitting game event: ",e.game),Ee.emitEvent("allPlayersAnsweredIncorrectly",[e.game])}function g(e,t){var a="0ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(e.toUpperCase());null!=d.current&&(t?d.current.children[a-1].classList.add("correct"):d.current.children[a-1].classList.add("incorrect"))}function b(e){var a=e.which||e.keyCode,r=String.fromCharCode(a).toUpperCase();console.log("Pressed: ",r);var o=-1;try{o=parseInt(r)}catch(i){alert("Must press a number key")}var c="0ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(o);console.log("Letter Pressed: ",c),console.log("Answers: ",n),Object.keys(n).includes(c)||alert("".concat(o," not in answer choices"));var l={answer:c};t.emit("playerGaveAnswer",l)}return Object(o.useEffect)((function(){document.addEventListener("keypress",b),t.on("playerAnsweredCorrectly",p),t.on("playerAnsweredIncorrectly",y),t.on("allPlayersAnsweredIncorrectly",f)}),[]),c.a.createElement("div",{style:he},c.a.createElement("div",{style:ve},c.a.createElement("div",{style:we},c.a.createElement("h1",null,a),c.a.createElement("ol",{ref:d},Object.keys(n).map((function(e){return c.a.createElement("li",{key:Object(oe.a)()},n[e])}))))),c.a.createElement("div",{style:je},c.a.createElement(ke,{messages:s})))}function ke(e){var t=e.messages;return c.a.createElement("div",null,t?t.map((function(e){return c.a.createElement("p",{key:Object(oe.a)()},e.message)})):"There are no notifications.")}var Ce=a(487),Ae=Object(ye.a)({table:{minWidth:650},cell:{border:"1px solid black",borderCollapse:"collapse"},controller:{backgroundColor:"slateblue"},blankCell:{backgroundColor:"white",color:"white",cursor:"no-drop"}}),Re={width:"80VW",maxWidth:"700px",height:"80VH",display:"grid",gridTemplateRows:"1fr 3fr",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},Se={},Ie={height:"30VH"},Le={};function xe(e){var t=v().socket,a=Object(o.useState)(),n=Object(u.a)(a,2),r=n[0],l=n[1],i=Object(o.useState)(c.a.createElement("h1",null,"Loading...")),s=Object(u.a)(i,2),d=s[0],p=s[1],y=Object(o.useState)(),f=Object(u.a)(y,2),g=f[0],b=f[1],E=Object(o.useState)(),h=Object(u.a)(E,2),w=h[0],j=h[1];if(Object(o.useEffect)((function(){!function(){var a=e.location.state;l(a),p(c.a.createElement(Pe,{players:a.players,questions:a.file.questions})),t.on("showUpcomingQuestion",A),t.on("askQuestion",R),t.on("showGameBoard",I),t.on("gameOver",k),Ee.addListener("playerAnsweredCorrectly",O),Ee.addListener("playerAnsweredIncorrectly",O),Ee.addListener("allPlayersAnsweredIncorrectly",O)}()}),[]),g&&void 0!==w)return c.a.createElement(m.a,{to:{pathname:"/waiting-room",state:Object(S.a)({},w)}});function O(e){console.log("Updating game with...: ",e),l(e)}function k(e){var t=e.game,a=e.winners.map((function(e){return e.name}));console.log("Game over response: ",t),C("Game Over!","The winners are ".concat(a.join(","))),setTimeout((function(){j(t),b(!0)}),5e3)}var C=function(e,t){Ce.a.open({message:e,description:t})};function A(e){console.log("Rendering upcoming question screen...");var t=c.a.createElement(ge,{category:e.category,value:parseInt(e.value)});p(t)}function R(e){console.log("Rendering question screen..."),p(c.a.createElement(Oe,{question:e.question,answers:e.answers}))}function I(e){console.log("Rendering game board screen..."),p(c.a.createElement(Pe,{players:e.players,questions:e.file.questions}))}return r?c.a.createElement("div",{style:Re},c.a.createElement("div",{style:Se},c.a.createElement(Ge,{players:r.players,controllingPlayerId:r.controllingPlayerId})),c.a.createElement("div",{style:Ie},d)):c.a.createElement("h1",null,"Loading..")}function Pe(e){e.players;var t=e.questions;return c.a.createElement("div",{style:Le},c.a.createElement(Te,t))}function Te(e){var t=v().socket;function a(e,a,n){console.log("ClickedGameCell: ".concat(e," ").concat(a));var r={category:e,value:a};t.emit("playerClickedGameCell",r)}var n=Ae(),r=function(e){var t=[];return e.forEach((function(e){t.includes(e.category)||t.push(e.category)})),t}(e=Object.values(e)),o=ce(e);return c.a.createElement(me.a,{component:pe.a},c.a.createElement(le.a,{className:n.table,"aria-label":"simple table"},c.a.createElement(ue.a,null,c.a.createElement(de.a,null,r.map((function(e){return c.a.createElement(se.a,{key:Object(oe.a)(),className:n.cell,align:"center"},e)})))),c.a.createElement(ie.a,null,Object.keys(o).map((function(e){return c.a.createElement(de.a,{key:Object(oe.a)()},o[e].map((function(e){var t=e.hasBeenAnswered?"".concat(n.cell," ").concat(n.blankCell):n.cell;return c.a.createElement(se.a,{key:Object(oe.a)(),className:t,align:"center",onClick:a.bind(a,e.category,e.value)},"$",e.value)})))})))))}function Ge(e){var t=e.players,a=e.controllingPlayerId,n=Ae();return c.a.createElement(me.a,{component:pe.a},c.a.createElement(le.a,{className:n.table,"aria-label":"simple table"},c.a.createElement(ue.a,null,c.a.createElement(de.a,null,t.map((function(e,t){console.log("player.id: ",e.id,"controllerId: ",a);var r=e.id===a?"".concat(n.cell," ").concat(n.controller):n.cell;return c.a.createElement(se.a,{key:Object(oe.a)(),className:r,align:"center"},e.name)})))),c.a.createElement(ie.a,null,t.map((function(e,t){return c.a.createElement(se.a,{key:Object(oe.a)(),className:n.cell,align:"center"},"$",e.score)})))))}var Ne={category:"Default",value:400},qe={question:"Who was the first woman?",answers:{A:"Abel",B:"Leah",C:"Rachel",D:"Eve"}};i.a.render(c.a.createElement((function(){return c.a.createElement(w,null,c.a.createElement(s.a,null,c.a.createElement(m.b,{exact:!0,path:"/",component:R}),c.a.createElement(m.b,{exact:!0,path:"/lobby",component:G}),c.a.createElement(m.b,{exact:!0,path:"/create-room",component:X}),c.a.createElement(m.b,{exact:!0,path:"/waiting-room",component:ne}),c.a.createElement(m.b,{exact:!0,path:"/game-board",component:xe}),c.a.createElement(m.b,{exact:!0,path:"/upcoming-question"},c.a.createElement(ge,Ne)),c.a.createElement(m.b,{exact:!0,path:"/game-question"},c.a.createElement(Oe,qe))))}),null),document.getElementById("root"))}},[[227,1,2]]]);
//# sourceMappingURL=main.0e0fc127.chunk.js.map